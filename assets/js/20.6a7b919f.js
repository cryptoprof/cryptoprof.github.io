(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{512:function(a,s,t){"use strict";t.r(s);var n=t(6),e=Object(n.a)({},(function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("p",[a._v("Laravel отличный фреймворк для веб разработки, который содержит кучу различных\nдополнений, которые делают ее супер быстрой и удобной."),t("br"),a._v("\nКогда требуется организовать авторизацию для мобильного приложения на сайте и\nразграничения доступа на уровне laravel я использую Laravel Sanctum. Но если\nиспользуется Laravel 5 версии, Sanctum не будет работать и лучше использовать\nLaravel Passport."),t("br"),a._v("\nНиже короткая инструкция как установить Laravel Passport:"),t("br"),a._v("\nВ виду того, что используется версия Laravel 5.7, укажем конкретную версию Laravel Passport:")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v('composer require laravel/passport "7.5.1"\n')])])]),t("p",[a._v("Прописываем сервис-провайдер Passport в providers в config/app.php:")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("Laravel\\Passport\\PassportServiceProvider::class,\n")])])]),t("p",[a._v("Запускаем миграции и устанавливаем Laravel Passport:")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("php artisan migrate\nphp artisan passport:install    \n")])])]),t("p",[a._v("ПРИМЕЧАНИЕ. Если в модели Users в качестве идентификатора пользователя используется uuid(у него тип varchar в базе)\nнужно во всех таблицах oauth_* у которых  client_id  есть, изменить тип поля с big_int на varchar 256(сделать миграцию в Laravel для этого)"),t("br"),a._v("\nВ модели Users добавить Laravel\\Passport\\HasApiTokens как в примере ниже")]),a._v(" "),t("div",{staticClass:"language-php line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-php"}},[t("code",[a._v("    "),t("span",{pre:!0,attrs:{class:"token php language-php"}},[t("span",{pre:!0,attrs:{class:"token delimiter important"}},[a._v("<?php")]),a._v("\n    \n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("namespace")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token package"}},[a._v("App")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    \n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("use")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token package"}},[a._v("Laravel"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("Passport"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("HasApiTokens")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("use")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token package"}},[a._v("Illuminate"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("Notifications"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("Notifiable")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("use")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token package"}},[a._v("Illuminate"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("Foundation"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("Auth"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("User")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("as")]),a._v(" Authenticatable"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    \n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("class")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("User")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("extends")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Authenticatable")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n      "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("use")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token package"}},[a._v("HasApiTokens")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" Notifiable"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("   \n")])])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br"),t("span",{staticClass:"line-number"},[a._v("9")]),t("br"),t("span",{staticClass:"line-number"},[a._v("10")]),t("br"),t("span",{staticClass:"line-number"},[a._v("11")]),t("br"),t("span",{staticClass:"line-number"},[a._v("12")]),t("br")])]),t("p",[a._v("Далее все согласно документации "),t("a",{attrs:{href:"https://laravel.ru/docs/v5/passport",target:"_blank",rel:"noopener noreferrer"}},[a._v("https://laravel.ru/docs/v5/passport"),t("OutboundLink")],1)]),a._v(" "),t("p",[a._v("Для тестирования авторизации и методов API рекомендую использовать "),t("a",{attrs:{href:"https://insomnia.rest/download/core/",target:"_blank",rel:"noopener noreferrer"}},[a._v("Insomnia"),t("OutboundLink")],1)])])}),[],!1,null,null,null);s.default=e.exports}}]);