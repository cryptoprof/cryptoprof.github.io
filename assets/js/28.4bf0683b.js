(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{523:function(t,n,e){"use strict";e.r(n);var s=e(6),a=Object(s.a)({},(function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("p",[t._v("Для публикации скрытого сайта в сети tor достаточно простого веб сервера.\nВ качестве примера можно развернуть сайт на базе Ubuntu+nginx\nУстановим необходимые пакеты:")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[t._v("sudo apt-get install nginx\nsudo apt-get install ntpdate tor\nsudo service tor stop\n")])])]),e("p",[t._v("В каталог где будут располагаться файлы сайта запишем html файл для теста:")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[t._v('echo "Test onion" > /usr/share/nginx/html/index.html\nchown -R debian-tor:debian-tor /usr/share/nginx/html\n')])])]),e("p",[t._v("Теперь настроим nginx для прослушивания порта 9070(может быть любой другой, но менять потом и в конфиге tor’а) и укажем расположение директории с сайтом. В файле /etc/nginx/sites-available/default очищаем все и вставляем следующее:")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[t._v("server{\n        listen 127.0.0.1:9070;\n        root /usr/share/nginx/html;\n        index index.html index.html;\n\n        server_name tortest;\n\n        location / {\n                autoindex on;\n        }\n\n}\n")])])]),e("p",[t._v("Откроем порт 9070 и запустим nginx:")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[t._v("sudo ufw allow 9070\nsudo service nginx start\n")])])]),e("p",[t._v("Теперь можно проверить — работает ли сайт, пройдя по адресу 127.0.0.1:9070\nОсталось настроить tor.")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[t._v("mv /etc/tor/torrc /etc/tor/torrc-default\n")])])]),e("p",[t._v("Отредактируем /etc/tor/torrc:")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[t._v("SocksPort 0 \nSocksListenAddress 127.0.0.1 \nRunAsDaemon 1\nDataDirectory /var/lib/tor\nHiddenServiceDir /var/lib/tor/myonion/\nHiddenServicePort 80 127.0.0.1:9070 #Тут прописывается порт на котором будет висеть скрытый сервис\n")])])]),e("p",[t._v("Запускаем tor и все готово:")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[t._v("sudo service tor start\n")])])]),e("p",[t._v("Адрес сервера можно посмотреть в файле /var/lib/tor/myonion/hostname и перейти через tor browser.")])])}),[],!1,null,null,null);n.default=a.exports}}]);