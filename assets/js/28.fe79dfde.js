(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{523:function(n,e,t){"use strict";t.r(e);var s=t(6),i=Object(s.a)({},(function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[t("p",[n._v("Потребовалось внести изменения в большое количество виртуальных хостов, нашел удобный скрипт для вывода информации(https://gist.github.com/jakubjedelsky/3142806):")]),n._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[n._v("#!/usr/bin/env python\n#\n# simle'n'stupid vhost \"parser\"\n#\n# Usage: ./vhosts-reader.py FILE\n#     FILE is a apache config file\nimport re\nimport sys\nimport os.path\n\nif len(sys.argv) != 2:\n    sys.exit('Usage: %s FILE' % sys.argv[0])\n\nFILE = sys.argv[1]\n\nif not os.path.isfile(FILE):\n    sys.exit('Unknown file %s' % FILE)\n\nf = open(FILE, 'r')\ndata_all = f.readlines()\nf.close()\n\ndata = filter( lambda i: re.search('^((?!#).)*$', i), data_all)\n\nID = 0\nenable = False\n\nresult = {}\nvhost = []\nwhile len(data) > 0:\n    out = data.pop(0)\n\n    # start of VirtualHost\n    if \"', '')\n        vhost.append(ip)\n        vhost.append(port)\n        enable = True\n        continue\n\n    if \"\" in out:\n        result[ID] = vhost\n        ID+=1\n        enable = False\n        vhost = []\n        continue\n            \n    if enable:\n        vhost.append(out)\n        continue\n\nfor i in result:\n    # result[i][0] is an IP\n    # result[i][1] is a port\n    # another list items are lines in vhost, grep them all\n    for line in result[i]:\n        if \"ServerName\" in line:\n            servername = line.split()[1]\n            continue\n        if \"DocumentRoot\" in line:\n            documentroot = line.split()[1]\n            continue\n        if \"ServerAlias\" in line:\n            serveralias = ','.join(str(n) for n in line.split()[1:])\n            continue\n        if \"SuexecUserGroup\" in line:\n            user = line.split()[1]\n\n    print \"%s:%s:%s:%s\" % (user, servername, serveralias, documentroot)\n")])])]),t("p",[n._v("Скрипт выведет пользователя, имя сервера, алиасы и корневую директорию виртуального хоста.\nя поправил вывод в конце на print documentroot. Например мне нужно вывести все директории содержащие директорию с именем example.com:")]),n._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[n._v("python2.7 myscript.py /etc/httd/httpd.conf |grep 'example.com$'\n")])])]),t("p",[n._v("Тем самым я получу все директории, заканчивающиеся на example.com и могу делать дальнейшие операции.")])])}),[],!1,null,null,null);e.default=i.exports}}]);